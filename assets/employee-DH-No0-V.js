import{j as e,L as U,a as y,b as F,c as C,q as E,F as V,v as K,w as B,x as k,y as T,_ as L,u as $,r as m,z as P,B as q,I as z,E as G,G as I,H as j,J as R,K as M,P as f,Q as Y}from"./index-Cc8wsajM.js";import{a as _,B as H}from"./buttons-vrdrcQfM.js";import{S as J,a as p}from"./container-BlReYI1a.js";import{S as w}from"./select-Dlmx0f32.js";import{D as Q,F as O,T as W}from"./FilterTable-jin0agqy.js";import{M as X}from"./menu-BUjgJ7Z6.js";import"./index-BYVD-7Ae.js";import"./index-B-zK9Jtd.js";const Z=[{accessorKey:"index",header:"Id",cell:a=>{const t=a.row.index;return e.jsx("span",{children:t+1})},enableSorting:!0,sortingFn:(a,t)=>a.index>t.index?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"profile",enableSorting:!1,header:()=>"Profile",cell:a=>{const t=a.getValue();return t?e.jsx("img",{src:t,loading:"lazy",alt:"profile",className:"w-10 aspect-square rounded-full"}):e.jsx("img",{alt:"profile",className:"w-10 aspect-square rounded-full"})}},{accessorKey:"name",header:()=>"Name",cell:a=>{const t=a.getValue(),{id:r,jobType:c}=a.row.original;return e.jsxs("div",{className:"w-44 cursor-pointer",children:[e.jsx(U,{to:`/employees/${r}`,className:"text-sm hover:underline text-slate-700 font-semibold",children:t}),e.jsx("p",{className:"text-sm",children:c})]})}},{accessorKey:"email",header:()=>"Email",cell:a=>{const t=a.getValue();return e.jsx("div",{className:"w-52 text-sm",children:t})}},{accessorKey:"date",header:()=>e.jsx("span",{children:"Date"}),cell:a=>{const t=a.getValue(),r=new Date(t);return e.jsx("span",{children:r.toLocaleDateString()})},sortDescFirst:!1},{accessorKey:"age",header:()=>"Age",sortDescFirst:!1,cell:a=>{const t=a.getValue();return t?e.jsx(e.Fragment,{children:t}):"--"}},{accessorKey:"visits",sortDescFirst:!1,header:()=>e.jsx("span",{children:"Visits"}),cell:a=>{const t=a.getValue();return t?e.jsx(e.Fragment,{children:t}):"--"}},{accessorKey:"status",header:"Status",cell:a=>{const t=a.getValue();return t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{style:{backgroundColor:t==null?void 0:t.color},className:"w-3 h-3 rounded-full"}),e.jsx("span",{children:t==null?void 0:t.name})]}):"--"},sortingFn:(a,t,r)=>a.getValue(r).name>t.getValue(r).name?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"id",enableSorting:!1,header:()=>"Actions",cell:a=>{const t=y(),r=F(),c=C(),{id:x,name:n}=a.row.original,l=d=>{r(`/employees/${d}/edit`,{state:{from:c}})},u=d=>{r(`/employees/${d}`,{state:{from:c}})},i=d=>{B.fire({title:"Are you sure?",text:`You want to delete ${n} user!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(g=>{g.isConfirmed&&(t(k(d)),t(T(d)),L.success(`${n} deleted successfull`,{position:"top-right"}))})};return e.jsxs(X,{children:[e.jsxs("li",{onClick:()=>{l(x)},children:[e.jsx(E,{})," Edit"]}),e.jsxs("li",{onClick:()=>{u(x)},children:[e.jsx(V,{})," View"]}),e.jsxs("li",{onClick:()=>{i(x)},children:[e.jsx(K,{})," Delete"]})]})}}],{followUp:ee,status:se}=M,de=()=>{const{users:a,loading:t}=$(s=>s.users),[r,c]=m.useState(""),[x,n]=m.useState(!1),[l,u]=m.useState({allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}}),i=y(),d=F(),{pathname:g}=C(),h=async s=>{i(f(!0)),await i(Y(s)),i(f(!1))},v=()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})),n(!1),c(""),h({...l,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})},b=s=>{n(!0),u(o=>{const A={...o.dates,...s};return{...o,dates:A}}),h({...l,dates:s})},S=s=>{u(o=>({...o,status:s})),n(!0),h({...l,status:s})},D=s=>{u(o=>({...o,allowFollowUp:s})),n(!0),h({...l,allowFollowUp:s})},N=s=>{c(s),n(s!=="")};return m.useEffect(()=>(i(P("employee")),()=>i(q())),[i,g]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(p,{children:e.jsx(Q,{value:l.dates,onChange:b})}),e.jsx(p,{children:e.jsx(z,{focus:!0,icon:e.jsx(G,{className:"text-slate-500",size:15}),type:"search",height:"33px",value:r,placeholder:"Search here..",onChange:s=>{var o;N((o=s==null?void 0:s.target)==null?void 0:o.value)}})}),x&&e.jsx(p,{children:e.jsx("div",{className:"px-1",children:e.jsx(_,{icon:e.jsx(I,{}),onClick:v})})}),e.jsx(p,{children:e.jsx(O,{label:"Filter Employee",onChangeClear:()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"}})),h({...l,allowFollowUp:{type:"All"},status:{name:"All"}})},children:e.jsxs("div",{className:"p-4 flex gap-4 flex-col",children:[e.jsx(j,{label:"Allow FollowUp",children:e.jsx(w,{options:ee,onChange:s=>{D(s)},value:l==null?void 0:l.allowFollowUp,fields:s=>s==null?void 0:s.type})}),e.jsx(j,{label:"Status",children:e.jsx(w,{options:se,onChange:s=>{S(s)},value:l==null?void 0:l.status,fields:s=>s==null?void 0:s.name})})]})})})]}),e.jsxs("div",{className:"p-6 flex gap-6 flex-col",children:[e.jsx("div",{className:"flex gap-2 items-center justify-between ",children:e.jsx(H,{text:"Add Employee",icon:e.jsx(R,{}),type:"button",onClick:()=>{d("/employees/add")}})}),e.jsx("div",{className:"p-2 rounded-md border border-slate-200 bg-white",children:e.jsx(W,{loading:t,Columns:Z,data:a,globalFilter:r,setGlobalFilter:c})})]})]})};export{de as default};
