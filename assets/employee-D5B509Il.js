import{j as e,L as U,a as y,b as F,c as C,q as E,F as V,v as K,w as B,x as k,y as T,_ as L,u as _,r as x,z as $,B as P,I as q,E as z,G,H as g,J as I,K as R,P as f,Q as M}from"./index-D-m5xOMZ.js";import{a as Y,B as H}from"./buttons-Df5y7yiQ.js";import{S as J,a as h}from"./container-42_N4fw4.js";import{S as w}from"./select-GtRqJf2v.js";import{D as Q,F as O,T as W}from"./FilterTable-CEmqxQZ-.js";import{M as X}from"./menu-DDyoIl7e.js";import"./index-CIJxZo0J.js";import"./index-B0azqrHb.js";const Z=[{accessorKey:"index",header:"Id",cell:a=>{const t=a.row.index;return e.jsx("span",{children:t+1})},enableSorting:!0,sortingFn:(a,t)=>a.index>t.index?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"profile",enableSorting:!1,header:()=>"Profile",cell:a=>{const t=a.getValue();return t?e.jsx("img",{src:t,loading:"lazy",alt:"profile",className:"w-10 aspect-square rounded-full"}):e.jsx("img",{alt:"profile",className:"w-10 aspect-square rounded-full"})}},{accessorKey:"name",header:()=>"Name",cell:a=>{const t=a.getValue(),{id:r,jobType:c}=a.row.original;return e.jsxs("div",{className:"w-44 cursor-pointer",children:[e.jsx(U,{to:`/crm_project/employees/${r}`,className:"text-sm hover:underline text-slate-700 font-semibold",children:t}),e.jsx("p",{className:"text-sm",children:c})]})}},{accessorKey:"email",header:()=>"Email",cell:a=>{const t=a.getValue();return e.jsx("div",{className:"w-52 text-sm",children:t})}},{accessorKey:"date",header:()=>e.jsx("span",{children:"Date"}),cell:a=>{const t=a.getValue(),r=new Date(t);return e.jsx("span",{children:r.toLocaleDateString()})},sortDescFirst:!1},{accessorKey:"age",header:()=>"Age",sortDescFirst:!1,cell:a=>{const t=a.getValue();return t?e.jsx(e.Fragment,{children:t}):"--"}},{accessorKey:"visits",sortDescFirst:!1,header:()=>e.jsx("span",{children:"Visits"}),cell:a=>{const t=a.getValue();return t?e.jsx(e.Fragment,{children:t}):"--"}},{accessorKey:"status",header:"Status",cell:a=>{const t=a.getValue();return t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{style:{backgroundColor:t==null?void 0:t.color},className:"w-3 h-3 rounded-full"}),e.jsx("span",{children:t==null?void 0:t.name})]}):"--"},sortingFn:(a,t,r)=>a.getValue(r).name>t.getValue(r).name?-1:1,sortDescFirst:!1,invertSorting:!0},{accessorKey:"id",enableSorting:!1,header:()=>"Actions",cell:a=>{const t=y(),r=F(),c=C(),{id:m,name:o}=a.row.original,l=d=>{r(`/crm_project/employees/${d}/edit`,{state:{from:c}})},u=d=>{r(`/crm_project/employees/${d}`,{state:{from:c}})},i=d=>{B.fire({title:"Are you sure?",text:`You want to delete ${o} user!`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete!"}).then(j=>{j.isConfirmed&&(t(k(d)),t(T(d)),L.success(`${o} deleted successfull`,{position:"top-right"}))})};return e.jsxs(X,{children:[e.jsxs("li",{onClick:()=>{l(m)},children:[e.jsx(E,{})," Edit"]}),e.jsxs("li",{onClick:()=>{u(m)},children:[e.jsx(V,{})," View"]}),e.jsxs("li",{onClick:()=>{i(m)},children:[e.jsx(K,{})," Delete"]})]})}}],{followUp:ee,status:se}=R,de=()=>{const{users:a,loading:t}=_(s=>s.users),[r,c]=x.useState(""),[m,o]=x.useState(!1),[l,u]=x.useState({allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}}),i=y(),d=F(),{pathname:j}=C(),p=async s=>{i(f(!0)),await i(M(s)),i(f(!1))},v=()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})),o(!1),c(""),p({...l,allowFollowUp:{type:"All"},status:{name:"All"},dates:{start:"",end:""}})},b=s=>{o(!0),u(n=>{const A={...n.dates,...s};return{...n,dates:A}}),p({...l,dates:s})},S=s=>{u(n=>({...n,status:s})),o(!0),p({...l,status:s})},D=s=>{u(n=>({...n,allowFollowUp:s})),o(!0),p({...l,allowFollowUp:s})},N=s=>{c(s),o(s!=="")};return x.useEffect(()=>(i($("employee")),()=>i(P())),[i,j]),e.jsxs(e.Fragment,{children:[e.jsxs(J,{children:[e.jsx(h,{children:e.jsx(Q,{value:l.dates,onChange:b})}),e.jsx(h,{children:e.jsx(q,{focus:!0,icon:e.jsx(z,{className:"text-slate-500",size:15}),type:"search",height:"33px",value:r,placeholder:"Search here..",onChange:s=>{var n;N((n=s==null?void 0:s.target)==null?void 0:n.value)}})}),m&&e.jsx(h,{children:e.jsx("div",{className:"px-1",children:e.jsx(Y,{icon:e.jsx(G,{}),onClick:v})})}),e.jsx(h,{children:e.jsx(O,{label:"Filter Employee",onChangeClear:()=>{u(s=>({...s,allowFollowUp:{type:"All"},status:{name:"All"}})),p({...l,allowFollowUp:{type:"All"},status:{name:"All"}})},children:e.jsxs("div",{className:"p-4 flex gap-4 flex-col",children:[e.jsx(g,{label:"Allow FollowUp",children:e.jsx(w,{options:ee,onChange:s=>{D(s)},value:l==null?void 0:l.allowFollowUp,fields:s=>s==null?void 0:s.type})}),e.jsx(g,{label:"Status",children:e.jsx(w,{options:se,onChange:s=>{S(s)},value:l==null?void 0:l.status,fields:s=>s==null?void 0:s.name})})]})})})]}),e.jsxs("div",{className:"p-6 flex gap-6 flex-col",children:[e.jsx("div",{className:"flex gap-2 items-center justify-between ",children:e.jsx(H,{text:"Add Employee",icon:e.jsx(I,{}),type:"button",onClick:()=>{d("/crm_project/employees/add")}})}),e.jsx("div",{className:"p-2 rounded-md border border-slate-200 bg-white",children:e.jsx(W,{loading:t,Columns:Z,data:a,globalFilter:r,setGlobalFilter:c})})]})]})};export{de as default};
