import{aC as y,r as a,ai as v,aD as x,j as E}from"./index-D-m5xOMZ.js";const R="label";function C(e,s){typeof e=="function"?e(s):e&&(e.current=s)}function D(e,s){const t=e.options;t&&s&&Object.assign(t,s)}function w(e,s){e.labels=s}function P(e,s){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:R;const l=[];e.datasets=s.map(r=>{const o=e.datasets.find(f=>f[t]===r[t]);return!o||!r.data||l.includes(o)?{...r}:(l.push(o),Object.assign(o,r),o)})}function I(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R;const t={labels:[],datasets:[]};return w(t,e.labels),P(t,e.datasets,s),t}function K(e,s){const{height:t=150,width:l=300,redraw:r=!1,datasetIdKey:o,type:f,data:u,options:c,plugins:b=[],fallbackContent:h,updateMode:p,...m}=e,d=a.useRef(null),n=a.useRef(),g=()=>{d.current&&(n.current=new y(d.current,{type:f,data:I(u,o),options:c&&{...c},plugins:b}),C(s,n.current))},i=()=>{C(s,null),n.current&&(n.current.destroy(),n.current=null)};return a.useEffect(()=>{!r&&n.current&&c&&D(n.current,c)},[r,c]),a.useEffect(()=>{!r&&n.current&&w(n.current.config.data,u.labels)},[r,u.labels]),a.useEffect(()=>{!r&&n.current&&u.datasets&&P(n.current.config.data,u.datasets,o)},[r,u.datasets]),a.useEffect(()=>{n.current&&(r?(i(),setTimeout(g)):n.current.update(p))},[r,c,u.labels,u.datasets,p]),a.useEffect(()=>{n.current&&(i(),setTimeout(g))},[f]),a.useEffect(()=>(g(),()=>i()),[]),v.createElement("canvas",Object.assign({ref:d,role:"img",height:t,width:l},m),h)}const O=a.forwardRef(K);function j(e,s){return y.register(s),a.forwardRef((t,l)=>v.createElement(O,Object.assign({},t,{ref:l,type:e})))}const L=j("pie",x),S=({values:e=[],labels:s=[],colors:t=[],label:l="Data"})=>{const r={labels:s,datasets:[{label:l,data:e,backgroundColor:t}]},o={responsive:!0,plugins:{legend:{position:"right"},title:{display:!1,text:"Chart.js Pie Chart"}}};return E.jsx(L,{data:r,options:o})},T=[{label:"inprocess",value:0,color:"blue"},{label:"pending",value:0,color:"yellow"},{label:"notstarted",value:0,color:"gray"},{label:"canceled",value:0,color:"red"},{label:"finished",value:0,color:"green"}],V=({data:e,label:s,chartjs:t=T})=>{const[l,r]=a.useState([]),[o,f]=a.useState([]),[u,c]=a.useState([]);return a.useEffect(()=>{var m,d;const b=[],h=[],p=[];for(let n=0;n<(t==null?void 0:t.length);n++){b.push(t[n].label),p.push(t[n].color);let g=0;for(let i=0;i<(e==null?void 0:e.length);i++)((d=(m=e[i])==null?void 0:m.status)==null?void 0:d.name)===t[n].label&&g++;h.push(g)}r(b),c(p),f(h)},[e]),E.jsx(S,{values:o,labels:l,colors:u,label:s})};export{V as P};
