import{a8 as E,a as S,b as y,r as i,ak as g,j as e,a9 as w,I as D,C as k,a6 as Y,e as F,_ as T,aq as B,ar as I,aa as L}from"./index-BvuqSfh8.js";import{B as M,C as R}from"./buttons-NkO0CRus.js";import{C as U}from"./container-BqgFr2rj.js";import{f as V}from"./formValidation-CwRn66Cy.js";import{S as P}from"./select-EnJOdRs7.js";import{R as v}from"./DatePicker-BnI0Xux_.js";import"./index-Bx1LNd47.js";const J=()=>{const{userId:o,id:x}=E(),d=S(),p=y(),[f,m]=i.useState(!1),[s,n]=i.useState({title:"",start:new Date,end:new Date,description:"",allDay:!1,status:g[0]}),[b,h]=i.useState(!1),[N,u]=i.useState({title:""}),C=async a=>{a.preventDefault();const t=V(s);if(Object.keys(t).length===0){h(!0);try{await T.promise(d(B({userId:o,eventId:x,updatedEvent:s})),{loading:"Updating event...",success:e.jsx("span",{children:"Event Updated Successfully"}),error:e.jsx("span",{children:"Failed to Update Event"})}),await d(I(s)),p(-1,{replace:!0})}catch(l){console.log(l)}}else u(l=>({...l,...t}));h(!1)};return i.useEffect(()=>{(async()=>{var l;m(!0);const r=(await d(L(o))).payload;if(r){let j={};(l=r==null?void 0:r.events)==null||l.map(c=>{(c==null?void 0:c.id)===x&&(j=c)}),n(c=>({...c,...j}))}m(!1)})()},[]),e.jsx("div",{className:"p-6",children:e.jsxs(U,{className:"relative",children:[e.jsx("div",{className:"border-b border-slate-300 p-4",children:e.jsx("h2",{className:"text-xl font-bold",children:"Update Event"})}),f&&e.jsx(w,{}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"p-4 flex gap-6 flex-col",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsx(D,{label:"Title",name:"title",important:!0,error:N.title,value:s==null?void 0:s.title,onChange:a=>{const{name:t,value:r}=a.target;n(l=>({...l,[t]:r})),u(l=>({...l,[t]:""}))}}),e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx("label",{className:"text-base",children:"Status"}),e.jsx(P,{options:g,value:s.status,fields:a=>a==null?void 0:a.name,onChange:a=>{n(t=>({...t,status:a}))}})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx("label",{className:"text-base",children:"Start Date"}),e.jsx(v,{value:new Date(s==null?void 0:s.start),onChange:a=>n(t=>({...t,start:a})),showTimeSelect:!0,dateFormat:"YYYY-MM-dd h:mm:aa"})]}),e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx("label",{className:"text-base",children:"End Date"}),e.jsx(v,{value:new Date(s==null?void 0:s.end),onChange:a=>n(t=>({...t,end:a})),showTimeSelect:!0,dateFormat:"YYYY-MM-dd h:mm:aa"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-8",children:e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx("label",{children:"All Day"}),e.jsx(k,{className:"w-5",checked:s==null?void 0:s.allDay,onChange:a=>n(t=>({...t,allDay:a.target.checked}))})]})}),e.jsx("div",{className:"pb-4",children:e.jsxs("div",{className:"flex gap-2 flex-col",children:[e.jsx("label",{className:"text-base",children:"Description"}),e.jsx(Y,{value:s==null?void 0:s.description,onChange:a=>n(t=>({...t,description:a}))})]})})]}),e.jsxs("div",{className:"border-t border-slate-300 p-4 flex gap-4",children:[e.jsx(M,{text:"Submit",icon:e.jsx(F,{}),type:"submit",loading:b}),e.jsx(R,{type:"button",text:"Cancel",onClick:()=>p(-1,{replace:!0})})]})]})]})})};export{J as default};
